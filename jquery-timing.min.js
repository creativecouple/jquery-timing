(function(m,j){var d={},e=1,f=m.fn.each,k=m.fn.on||m.fn.bind,n=m.fn.off||m.fn.unbind,l={};function a(p,q){q=m(q);q.prevObject=p;var o=p.length;if(o!==q.length){return q}while(o--){if(p[o]!==q[o]){return q}}return p}function c(o){var p=[],q=o.length;while(q--){p[q]=o[q].f}return p}function h(p,w,t,s){t=t||[];var u={e:p,h:w},q=false,o,x;function v(y,z){y.d=false;z.then(function(){y.j=a(y.e,y.j);y.d=true;r()},true)}function r(z){while(!q){try{q=!q;if(typeof s=="function"){s(m.makeArray(u.j||u.e))}if(u.d==false){return z}if(!u.h.i){if(!t.length){return u.e}x=t[0].k&&t[0].k(r,u,t);if(!x){return z}u=x;continue}o=u.e&&u.e[u.h.i]||l[u.h.i];if(!o){throw'no such method "'+u.h.i+'" on object ('+u.e+")"}if(o.timing&&!u.d){u.d=false;u=o.timing(r,u,t,s)||u}else{if(!o.timing&&!u.d){u.j=u.e[u.h.i].apply(u.e,u.h.b);if(t.length&&u.j instanceof g){v(u,u.j);continue}}x={e:u.j,h:u.h.j};u.d=false;if(typeof u.c=="function"){u.c.apply(u.e,c(t))}u=x}}catch(y){q=!q;throw y}finally{q=!q}}}return r}function g(q,r,p){this[".methods"]=r;this[".callback"]=p;this.length=0;Array.prototype.push.apply(this,m.makeArray(this._=q._=q));for(var o in q){if(!(o in g.prototype)&&typeof q[o]=="function"){this[o]=i(o)}}}function i(o){return g.prototype[o]=function(){this[".methods"].i=o;this[".methods"].b=arguments;this[".methods"]=this[".methods"].j={};return this[".callback"]?this[".callback"](this,o,arguments):this}}m.each(["bind","on","one","live","delegate"],function(p,o){if(m.fn[o]){var q=m.fn[o];m.fn[o]=function(){var s,u,t,r;for(s=0;s<arguments.length;s++){if(typeof arguments[s]=="function"||(arguments[s]&&typeof arguments[s]=="object")||arguments[s]===false){if(arguments[s]!==m){if(typeof arguments[s]=="function"&&m.guid){arguments[s].guid=arguments[s].guid||m.guid++}return q.apply(this,arguments)}break}}Array.prototype.splice.call(arguments,s,1,function(){r=h(m(this),u,[{f:m.extend(Array.prototype.shift.apply(arguments),arguments)}],function(v){t.length=0;Array.prototype.push.apply(t,v)});return r()});return t=new g(q.apply(this,arguments),u={},function(){return r?r(t):t})}}});m.each(["animate","load"],function(p,o){if(m.fn[o]){var q=m.fn[o];m.fn[o]=function(){while(arguments.length&&arguments[arguments.length-1]==null){Array.prototype.pop.apply(arguments)}if(this.length&&arguments.length>1&&arguments[arguments.length-1]===m){var r="_timing"+e++;arguments[arguments.length-1]=function(){m(this).trigger(r)};return this.each().one(r).all(q.apply(this,arguments))}return q.apply(this,arguments)}}});m.each(["wait","repeat","join","then"],function(p,o){m.fn[o]=function(){var r={},q=new g(this,r,h(this,r,[],function(s){q.length=0;Array.prototype.push.apply(q,s)}));return q[o].apply(q,arguments)}});m.fn.join.timing=function(p,r){var q,o,s=r.e.length;if(typeof r.h.b[0]=="string"){q=r.h.b[0];if(typeof r.h.b[1]=="function"){r.c=r.h.b[1]}else{o=r.h.b[1];r.c=r.h.b[2]}}else{if(typeof r.h.b[0]=="function"){r.c=r.h.b[0]}else{o=r.h.b[0];r.c=r.h.b[1]}}r.j=r.e;r.d=!s;if(o){r.e.promise(q==null?"fx":q).done(function(){r.d=true;p()})}else{r.e.queue(q==null?"fx":q,function(t){r.d=!--s;p();t()})}};m.fn.then.timing=function(o,p){p.c=p.h.b[0];p.j=p.e;p.d=true;if(p.h.b[1]){Array.prototype.shift.apply(p.h.b)}};m.fn.wait.timing=function(q,u){var p,s,t;if(typeof u.h.b[0]=="function"){u.c=u.h.b[0]}else{p=u.h.b[0];u.c=u.h.b[1]}function o(){n.call(s?n.call(u.e,s,o):u.e,"unwait",r);u.d=true;q()}function r(){n.call(s?n.call(m(this),s,o):m(this),"unwait",r);u.j=u.e=u.e.not(this);if(!u.e.length){u.d=false;j.clearTimeout(t);u={e:u.e}}q()}if(typeof p=="string"){k.call(u.e,s=p,o)}else{if(typeof p=="object"&&typeof p.done=="function"){p.done(o)}else{t=j.setTimeout(o,Math.max(0,p))}}k.call(u.e,"unwait",r);u.j=u.e};m.fn.each=function(q){if(!q||q===m){var p={},o=new g(this,p,h(this,p,[],function(r){o.length=0;Array.prototype.push.apply(o,r)}));return o.each(q)}return f.apply(this,arguments)};m.fn.each.timing=function(r,u,v,t){if(u.h.b[0]&&u.h.b[0]!==m){u.d=true;u.j=f.apply(u.e,u.hs.b);return}var A=u.e.length,p=0,x,s,z=[],y=[],w={},q=u.h.b[0]===m;function o(){if(q&&p<A){(z[p])()}else{for(var B=0;B<A;B++){(z[B])()}}return w}for(x in g.prototype){w[x]=o}w.length=A;u.e.each(function(B){var C=v.slice();y[B]=[w[B]=this];C.unshift({f:B,a:function(D){p++;if(p==A){s=D.h.j}r()},g:l.all});z[B]=h(m(this),u.h.j,C,function(E){y[B]=E;w.length=0;for(var D=0;D<A;D++){Array.prototype.push.apply(w,y[D])}if(t){t(m.makeArray(w))}})});u.j=w;u.d=true;u.k=function(D,C){if(p==A){v.shift();return{e:a(u.e,w),h:s}}var B=p;o();if(p!=B){return C}};u.f=A;v.unshift(u)};l.all=function(o){m.extend(o.h,{j:m.extend({},o.h),i:"all",b:[]});o.d=null};l.all.timing=function(o,q,p){if(!p.length||!p[0].g){throw".all() method must be used after .each() only"}if(!p[0].a){p[0].g(q);return}p[0].a(q)};m.fn.repeat.timing=function(s,v,w){var q,t,u,o,p;if(typeof v.h.b[0]=="function"){v.c=v.h.b[0]}else{if(typeof v.h.b[1]=="function"){q=v.h.b[0];v.c=v.h.b[1]}else{q=v.h.b[0];t=v.h.b[1];v.c=v.h.b[2]}}function x(){v.j=v.j||v.e;v.d=true;s()}function r(){n.call(o?n.call(m(this),o,x):m(this),"unrepeat",r);var y=v.e.not(this);v.j=(v.j==v.e)?y:v.j;v.e=y;v.d=v.e.length&&v.d;q=v.e.length&&q;j.clearInterval(!v.e.length&&p);s()}v.k=function(z,y){if(v.d||u){v.f++;v.j=v.j||v.e;v.d=v.d||(q&&y.e&&y.e.length);return v}};if(q==null){t=q=true;j.setTimeout(function(){u=true;s()},0)}else{if(typeof q=="string"){k.call(v.e,o=q,x)}else{p=j.setInterval(x,Math.max(0,q))}q=false}k.call(v.e,"unrepeat",r);v.j=v.e;v.f=0;v.m=function(y){if(y){r.apply(v.e)}if(q){x()}};v.g=l.until;if(t){x()}w.unshift(v)};l.until=function(o){m.extend(o.h,{j:m.extend({},o.h),i:"until",b:[]});o.d=null};l.until.timing=function(o,r,q){if(!q.length||!q[0].g){throw".until() method must be used after .repeat() only"}if(!q[0].m){q[0].g(r);return}var s=r.h.b[0],p=r.h.b[1];if(s===m){s=null;p=r.h.b.length<=1||p}if(typeof s=="function"){s=s.apply(r.e,c(q))}if(s==null){s=!r.e.size()}if(typeof s=="object"){s=s.toString()}if(typeof s=="number"){s=q[0].f>=s-1}if(s){r.d=true;r.j=r.e;q.shift().m(s)}else{if(p){q[0].j=r.e}r=q[0];r.f++;r.m(s);return r}};new g(l);m.each(["unwait","unrepeat"],function(p,o){m.fn[o]=function(){return this.trigger(o)}});m.each(["wait","repeat","join","then","unwait","unrepeat"],function(p,o){m[o]=function(){var q=typeof arguments[0]=="string"?Array.prototype.shift.apply(arguments):"";return m.fn[o].apply(d[q]=(d[q]||m("<div>").text(q)),arguments)}});function b(r,u,q){if(typeof r=="string"){q=new Function("x","return ["+r+"\n,x]");r=function(w,v){v=q(w);p.x=v[1];return v[0]}}var o=typeof u=="function",t=typeof r=="function",p=function(v){if(arguments.length==1){p.x=v;if(o){u(v)}}else{return s()}};function s(v){v=o?u():p.x;return t?r(v):v}p.x=0;p._={toString:p.$=p.toString=s.toString=s};p.mod=function(v){return b(function(w){return w%v},p)};p.add=function(v){return b(function(w){return w+v},p)};p.neg=function(){return b("-x",p)};p.X=function(v){return b(v,p)};m.each("abcdefghij",function(v,w){p[v]=p[w]=function(){p(arguments[v])}});return p}m.X=b;m.fn.$=function(){var o=m.apply(j,arguments);o.prevObject=this;return o}})(jQuery,window);