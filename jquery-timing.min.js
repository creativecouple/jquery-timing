(function(n,j){var e={};function h(p){var t={},x={},u={c:p,f:t},v=[],s=j.setTimeout(function(){s=null;r()},0),o,q,r=function(){while(true){p=u.j||u.c;x.length=0;Array.prototype.push.apply(x,p.get());if(u.j==0){return}if(u.f.g){o=p[u.f.g];if(!o){throw"no such method: "+u.f.g}if(o._timing){q=!!u.j||o._timing(r,u,v);if(q===true){w()}else{u=q||u}}else{p=o.apply(p,u.f.a);w()}}else{if(!v[0]){return p}if(s){return}u=a._timing(r,false,v)}}},y;function w(){u.j=u.j&&0;if(typeof u.b=="function"){d(v,u.c,u.b)}u={f:u.f.h,c:p}}for(y in p){if(typeof p[y]=="function"){(function(z){x[z]=function(){t.g=z;t.a=arguments;t=t.h={};return r&&r()||x}})(y)}}x._=p._=p;return x}function d(p,o,q){return q.apply(o,n(p).map(function(){return this.d}).get())}function g(){return h(this).wait.apply(this,arguments)}g._timing=function(q,s){var p,o,r;s.j=0;if(typeof s.f.a[0]=="function"){s.b=s.f.a[0]}else{p=s.f.a[0];s.b=s.f.a[1]}if(typeof p=="string"){o=function(){n(this).unbind(p,o).unbind("__unwait__",r);s.j=s.j&&s.j.add(this)||n(this);q()};r=function(){n(this).unbind("__unwait__",r);s.c=s.c.not(this);s.j=s.c.length&&s.j&&s.j.not(this);n(this).unbind(p,o)};s.c.bind(p,o)}else{o=j.setTimeout(function(){s.c.unbind("__unwait__",r);s.j=s.c;q()},Math.max(0,p));r=function(){n(this).unbind("__unwait__",r);s.c=s.c.not(this);s.j=s.c.length&&s.j&&s.j.not(this);if(!s.c.length){j.clearTimeout(o)}}}s.c.bind("__unwait__",r)};function l(){return this.trigger("__unwait__")}function b(){return h(this).repeat.apply(this,arguments)}b._timing=function(q,t,s,u){var p,o,r;t.j=0;if(typeof t.f.a[0]=="function"){t.b=t.f.a[0]}else{if(typeof t.f.a[1]=="function"){p=t.f.a[0];t.b=t.f.a[1]}else{p=t.f.a[0];t.j=!!t.f.a[1]&&t.c;t.b=t.f.a[2]}}if(p==null){o=true;r=function(){n(this).unbind("__unrepeat__",r);t.c=t.c.not(this);t.j=t.c.length&&t.j&&t.j.not(this);o=t.c.length&&o};t.l=function(v){if(!v&&o){t.j=t.c}else{t.c.unbind("__unrepeat__",r)}};t.j=t.c}else{if(typeof p=="string"){o=function(){t.j=t.j&&t.j.add(this)||n(this);q()};r=function(){n(this).unbind("__unrepeat__",r);t.c=t.c.not(this);t.j=t.c.length&&t.j&&t.j.not(this);n(this).unbind(p,o)};t.l=function(v){if(v){t.c.unbind("__unrepeat__",r).unbind(p,o)}};t.c.bind(p,o)}else{o=j.setInterval(function(){t.j=t.c;q()},Math.max(0,p));r=function(){n(this).unbind("__unrepeat__",r);t.c=t.c.not(this);t.j=t.c.length&&t.j&&t.j.not(this);if(!t.c.length){j.clearInterval(o)}};t.l=function(v){if(v){t.c.unbind("__unrepeat__",r);j.clearInterval(o)}}}}t.c.bind("__unrepeat__",r);t.d=0;s.unshift(t)};function k(){return this.trigger("__unrepeat__")}function a(){throw".until() method must be used after .repeat() only"}a._timing=function(o,q,p){var r=q&&q.f.a[0];if(r==null){r=!q.c.size()}if(typeof r=="function"){r=d(p,q.c,r)}if(typeof r=="object"){r=r.toString()}if(typeof r=="number"){r=p[0].d>=r-1}if(r){q=p.shift();q.l(true);return true}else{q=p[0];q.d++;q.l();return q}};function f(o){o.apply(this);return this}f._timing=function(o,p){p.b=p.f.a[0];return true};function c(){return h(this).join.apply(this,arguments)}c._timing=function(o,r){var p,q,s=n(r.c);r.j=0;if(typeof r.f.a[0]=="function"){r.b=r.f.a[0]}else{q=r.f.a[0];r.b=r.f.a[1]}r.c.queue(q==null?"fx":q,function(t){if(s.length&&!(s=s.not(this)).length){r.j=r.c;if(p){o()}}t()});p=true};function i(p,q,o){if(typeof p=="string"){Array.prototype.shift.apply(o)}else{p=""}return q.apply(e[p]=(e[p]||n("<div>").text(p)),o)}function m(r,u,q){if(typeof r=="string"){q=new Function("x","return ["+r+"\n,x]");r=function(w,v){v=q(w);p.x=v[1];return v[0]}}var o=typeof u=="function",t=typeof r=="function",p=function(v){if(arguments.length==1){p.x=v;if(o){u(v)}}else{return p.$()}};function s(v){v=o?u():p.x;return t?r(v):v}s.toString=s;n.extend(p,{x:0,$:s,toString:s,_:{toString:p.$},mod:function(v){return m(function(w){return w%v},p)},add:function(v){return m(function(w){return w+v},p)},neg:function(){return m("-x",p)},$$:function(v){return m(v,p)}});n.each("abcdefghij",function(v,w){p[v]=p[w]=function(){p(arguments[v])}});return p}j.$$=m;n.fn.extend({wait:g,unwait:l,repeat:b,unrepeat:k,until:a,then:f,join:c,$:n});n.extend({wait:function(o){return i(o,g,arguments)},unwait:function(o){return i(o,l,arguments)},repeat:function(o){return i(o,b,arguments)},unrepeat:function(o){return i(o,k,arguments)},then:function(o){return i(o,f,arguments)},join:function(o){return i(o,c,arguments)},$$:m})})(jQuery,window);