(function(n,i){var m={};function g(p,v,q){var u={},z={},w={c:p,f:u},x=[],t=i.setTimeout(function(){t=null;s()},0),o,r,s=function(){while(true){p=w.j||w.c;z.length=0;Array.prototype.push.apply(z,p.get());if(w.j==0){return}if(w.f.g){o=p[w.f.g];if(!o){throw"no such method: "+w.f.g}if(o._timing){r=!!w.j||o._timing(s,w,x);if(r===true){y()}else{w=r||w}}else{p=o.apply(p,w.f.a);y()}}else{if(!x[0]){return p}if(t){return}w=a._timing(s,false,x)}}},A;function y(){w.j=w.j&&0;if(typeof w.b=="function"){d(x,w.c,w.b)}w={f:w.f.h,c:p}}for(A in p){if(typeof p[A]=="function"){(function(B){z[B]=function(){u.g=B;u.a=arguments;u=u.h={};return s()||z}})(A)}}z._=p._=p;return z[v].apply(p,q)}function d(p,o,q){return q.apply(o,n(p).map(function(){return this.d}).get())}function f(){return g(this,"wait",arguments)}f._timing=function(q,s){var p,o,r;s.j=0;if(typeof s.f.a[0]=="function"){s.b=s.f.a[0]}else{p=s.f.a[0];s.b=s.f.a[1]}if(typeof p=="string"){o=function(){n(this).unbind(p,o).unbind("__unwait__",r);s.j=s.j&&s.j.add(this)||n(this);q()};r=function(){n(this).unbind("__unwait__",r);s.c=s.c.not(this);s.j=s.c.length&&s.j&&s.j.not(this);n(this).unbind(p,o)};s.c.bind(p,o)}else{o=i.setTimeout(function(){s.c.unbind("__unwait__",r);s.j=s.c;q()},Math.max(0,p));r=function(){n(this).unbind("__unwait__",r);s.c=s.c.not(this);s.j=s.c.length&&s.j&&s.j.not(this);if(!s.c.length){i.clearTimeout(o)}}}s.c.bind("__unwait__",r)};function k(){return this.trigger("__unwait__")}function b(){return g(this,"repeat",arguments)}b._timing=function(q,t,s,u){var p,o,r;t.j=0;if(typeof t.f.a[0]=="function"){t.b=t.f.a[0]}else{if(typeof t.f.a[1]=="function"){p=t.f.a[0];t.b=t.f.a[1]}else{p=t.f.a[0];t.j=!!t.f.a[1]&&t.c;t.b=t.f.a[2]}}if(p==null){o=true;r=function(){n(this).unbind("__unrepeat__",r);t.c=t.c.not(this);t.j=t.c.length&&t.j&&t.j.not(this);o=t.c.length&&o};t.l=function(v){if(!v&&o){t.j=t.c}else{t.c.unbind("__unrepeat__",r)}};t.j=t.c}else{if(typeof p=="string"){o=function(){t.j=t.j&&t.j.add(this)||n(this);q()};r=function(){n(this).unbind("__unrepeat__",r);t.c=t.c.not(this);t.j=t.c.length&&t.j&&t.j.not(this);n(this).unbind(p,o)};t.l=function(v){if(v){t.c.unbind("__unrepeat__",r).unbind(p,o)}};t.c.bind(p,o)}else{o=i.setInterval(function(){t.j=t.c;q()},Math.max(0,p));r=function(){n(this).unbind("__unrepeat__",r);t.c=t.c.not(this);t.j=t.c.length&&t.j&&t.j.not(this);if(!t.c.length){i.clearInterval(o)}};t.l=function(v){if(v){t.c.unbind("__unrepeat__",r);i.clearInterval(o)}}}}t.c.bind("__unrepeat__",r);t.d=0;s.unshift(t)};function j(){return this.trigger("__unrepeat__")}function a(){throw".until() method must be used after .repeat() only"}a._timing=function(o,q,p){var r=q&&q.f.a[0];if(r==null){r=!q.c.size()}if(typeof r=="function"){r=d(p,q.c,r)}if(typeof r=="object"){r=r.toString()}if(typeof r=="number"){r=p[0].d>=r-1}if(r){q=p.shift();q.l(true);return true}else{q=p[0];q.d++;q.l();return q}};function e(o){o.apply(this);return this}e._timing=function(o,p){p.b=p.f.a[0];return true};function c(){return g(this,"join",arguments)}c._timing=function(o,r){var q,p,s=n(r.c);r.j=0;if(typeof r.f.a[0]=="function"){r.b=r.f.a[0]}else{q=r.f.a[0];r.b=r.f.a[1]}r.c.queue(q==null?"fx":q,function(t){if(s.length&&!(s=s.not(this)).length){r.j=r.c;if(p){o()}}t()});p=true};function h(o,q,p){if(typeof o=="string"){Array.prototype.shift.apply(p)}else{o=""}return q.apply(m[o]=(m[o]||n("<div>").text(o)),p)}function l(r,u,q){if(typeof r=="string"){q=new Function("x","return ["+r+"\n,x]");r=function(w,v){v=q(w);p.x=v[1];return v[0]}}var o=typeof u=="function",t=typeof r=="function",p=function(v){if(arguments.length==1){p.x=v;if(o){u(v)}}else{return p.$()}};function s(v){v=o?u():p.x;return t?r(v):v}s.toString=s;n.extend(p,{x:0,$:s,toString:s,_:{toString:p.$},mod:function(v){return l(function(w){return w%v},p)},add:function(v){return l(function(w){return w+v},p)},neg:function(){return l("-x",p)},$$:function(v){return l(v,p)}});n.each("abcdefghij",function(v,w){p[v]=p[w]=function(){p(arguments[v])}});return p}i.$$=l;n.fn.extend({wait:f,unwait:k,repeat:b,unrepeat:j,until:a,then:e,join:c,$:n});n.extend({wait:function(o){return h(o,f,arguments)},unwait:function(o){return h(o,k,arguments)},repeat:function(o){return h(o,b,arguments)},unrepeat:function(o){return h(o,j,arguments)},then:function(o){return h(o,e,arguments)},join:function(o){return h(o,c,arguments)},$$:l})})(jQuery,window);