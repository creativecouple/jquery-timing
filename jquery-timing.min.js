(function(b,h){var s="__timeouts",v="__intervals",j="object",f="function",m="number",l="string",x=undefined,k="fx",t={};function e(A,z){A=A||[];for(var y=0;y<A.length;y++){if(A[y]===z){if(y<A.length-1){A[y]=A.pop();y--}else{A.pop()}}}return A}function r(z,y){z=z||[];z.push(y);return z}function d(A){var z={},y={l:t,i:z},B;for(B in A){if(typeof A[B]==f){(function(C){z[C]=function(){y=y.h={g:C,a:arguments,l:t};return z}})(B)}}return y}function q(z,B,y){g(B,z.b,y);if(!z.h){for(;y&&(y.l===t)&&(typeof y.k==j);y=y.j){if(!y.k.e){B=y.c;z=y.f;y.d++;g(B,z.b,y);break}}}for(var E=z.h,A=B,C=y,F,D;E;E=E.h){g(A,E.b,C);F=A[E.g];if(F===a){D=a.call(A,E.a[0],C);if(D){if(typeof C.k==j){C.k.e=true}else{h.clearInterval(C.k)}C.c.each(function(){e(b(this).data(v),C.k)});C=D}else{if(typeof C.k==j){E={}}else{break}}}else{if(F===i){i.call(A,E.a[0],E.a[1],E.a[2],C,E);break}else{if(F===p){p.call(A,E.a[0],E.a[1],C,E);break}else{if(F===n){n.call(A,E.a[0],E.a[1],C,E);break}else{if(F===u){A=u.call(A,E.a[0],C)}else{A=F.apply(A,E.a)}}}}}if(!E.h){for(;C&&(C.l===t)&&(typeof C.k==j);C=C.j){if(!C.k.e){A=C.c;E=C.f;C.d++;g(A,E.b,C);break}}}}}function p(C,E,y,A){if(typeof C==f){E=C;C=0}var B=this,z=(A&&A.l===t)?A:d(B),D;z.b=E;D=h.setTimeout(function(){q(z,B,y);B.each(function(){e(b(this).data(s),D)})},Math.max(0,C||0));B.each(function(){b(this).data(s,r(b(this).data(s),D))});return z.i}function w(){return this.each(function(){var y=b(this).data(s);while(y&&y.length){h.clearTimeout(y.pop())}})}function i(E,B,F,y,A){if(typeof E==f){F=E;E=0}if(typeof B==f){F=B;B=false}var C=this,z=(A&&A.l===t)?A:d(C);y={d:-1,c:C,j:(y&&(y.l===t))?y:{},l:t,f:z};function D(){y.d++;q(z,C,y)}z.b=F;if(B||!E){h.setTimeout(D,0)}y.k=E?h.setInterval(D,Math.max(0,E)):{e:false};C.each(function(){b(this).data(v,r(b(this).data(v),y.k))});return z.i}function c(){return this.each(function(){var y=b(this).data(v),z;while(y&&y.length){z=y.pop();if(typeof z==j){z.e=true}else{h.clearInterval(z)}}})}function g(A,C,y){if(typeof C==f){var z=[],B;for(B=y;B&&(B.l===t);B=B.j){z.push(B.d)}return C.apply(A,z)}}function a(z,y){if(!y||y.l!==t){throw new Error(".until() method cannot be called without previous use of .repeat()")}if(z===x){z=this.length<=0}if(typeof z==f){z=g(this,z,y)}if(typeof z==j){z=z.toString()}if(typeof z==m){z=y.d>=z}return z?y.j:false}function u(z,y){g(this,z,y);return this}function n(C,D,y,A){if(C===x){C=k}else{if(typeof C==f){D=C;C=k}}var B=this,z=(A&&A.l===t)?A:d(B);z.b=D;h.setTimeout(function(){B.queue(C,function(E){q(z,B,y);E()})},0);return z.i}function o(y,A,z){if(typeof y==l){Array.prototype.shift.apply(z)}else{y=""}t[y]=t[y]||b("<div>");return A.apply(t[y],z)}b.fn.extend({wait:p,unwait:w,repeat:i,unrepeat:c,until:a,then:u,join:n,$:b});b.extend({wait:function(y){return o(y,p,arguments)},unwait:function(y){return o(y,w,arguments)},repeat:function(y){return o(y,i,arguments)},unrepeat:function(y){return o(y,c,arguments)},then:function(y){return o(y,u,arguments)}});h.$$=function(B,z){if(typeof B==l){B=new Function("x","return "+B)}var y=(typeof z==f),C=(typeof B==f),A=function(D){if(arguments.length){A.value=D;if(y){z(D)}}return A.toString()};A.toString=function(){var D=y?z():A.value;return C?B(D):D};A.$={toString:A.toString};A.modulo=function(D){return $$(function(E){return E%D},A)};A.plus=function(D){return $$(function(E){return E+D},A)};A.minus=function(D){return $$(function(E){return E-D},A)};return A}})(jQuery,window);